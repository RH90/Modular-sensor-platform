C51 COMPILER V9.53.0.0   F99X_SLEEPMODE_PORTMATCHWAKE                                      04/24/2018 12:57:52 PAGE 1   


C51 COMPILER V9.53.0.0, COMPILATION OF MODULE F99X_SLEEPMODE_PORTMATCHWAKE
OBJECT MODULE PLACED IN .\src\F99x_SleepMode_PortMatchWake.OBJ
COMPILER INVOKED BY: c:\SiliconLabs\SimplicityStudio\v4\developer\toolchains\keil_8051\9.53\BIN\C51.exe C:\Users\Rilind\
                    -Desktop\System_project\Exam_Project\Exam_Project_2\F99x-98x_SleepMode_PortMatchWake\src\F99x_SleepMode_PortMatchWake.c O
                    -MF2 SMALL DEBUG OBJECTEXTEND ROM(LARGE) WARNINGLEVEL(2) FLOATFUZZY(3) OPTIMIZE(8,SPEED) DEFINE(DEBUG=1) INTVECTOR(0X0000
                    -) INTPROMOTE INCDIR(C:/Users/Rilind/Desktop/System_project/Exam_Project/Exam_Project_2/F99x-98x_SleepMode_PortMatchWake/
                    -inc;C:/SiliconLabs/SimplicityStudio/v4/developer/sdks/8051/v4.1.1//Device/shared/si8051base;C:/SiliconLabs/SimplicityStu
                    -dio/v4/developer/sdks/8051/v4.1.1//Device/C8051F990/inc) PRINT(.\src\F99x_SleepMode_PortMatchWake.lst) COND PAGEWIDTH(12
                    -0) PAGELENGTH(65) OBJECT(.\src\F99x_SleepMode_PortMatchWake.OBJ)

line level    source

   1          //-----------------------------------------------------------------------------
   2          // F99x_SleepMode_PortMatchWake.c
   3          //-----------------------------------------------------------------------------
   4          // Copyright 2014 Silicon Laboratories, Inc.
   5          // http://developer.silabs.com/legal/version/v11/Silicon_Labs_Software_License_Agreement.txt
   6          //
   7          // Program Description:
   8          //
   9          // This program flashes the red LED on the C8051F996 target board using the
  10          // interrupt handler for Timer2 when the MCU is awake.
  11          //
  12          // Pressing the switch on P0.3 will place the device in a low power mode.
  13          // Pressing the switch on P0.2 will wake up the device using Port Match.
  14          //
  15          // How To Test:
  16          //
  17          // 1) Ensure that jumpers are placed on the following:
  18          //       J8:   P1.5/LED1.5
  19          //             P1.3/LED1.3
  20          //             P0.2/SW0.2
  21          //             P0.3/SW0.3
  22          //       J11:  PWR/WALL_PWR
  23          //       J17:  VDD_PIN/PWR
  24          // 2) Connect the USB Debug Adapter to J4.
  25          // 3) Turn the POWER switch (SW5) to the "ON" position.
  26          // 4) Compile and download code to a 'F99x device on a C8051F99x-TB development
  27          //    board by selecting Run -> Debug from the menus, clicking the Debug button
  28          //    in the quick menu, or pressing F11.
  29          // 5) Run the code by selecting Run -> Resume from the menus, clicking the
  30          //    Resume button in the quick menu, or pressing F8.
  31          // 6) Press P0.3 to place the device in sleep mode.
  32          //    Press P0.2 to wake it back up. The Red LED will blink when
  33          //    the device is awake.
  34          //
  35          //
  36          // Target:         C8051F99x-C8051F98x
  37          // Tool chain:     Silicon Labs Studio / Keil C51 9.51
  38          // Command Line:   None
  39          //
  40          // Release 1.1 (BL)
  41          //    - Updated Description / How to Test
  42          //    - 13 JAN 2014
  43          //
  44          // Release 1.0
  45          //    - Initial Revision (FB)
  46          //    - 19 MAY 2010
  47          //
  48          
  49          //-----------------------------------------------------------------------------
  50          // Includes
C51 COMPILER V9.53.0.0   F99X_SLEEPMODE_PORTMATCHWAKE                                      04/24/2018 12:57:52 PAGE 2   

  51          //-----------------------------------------------------------------------------
  52          #include <compiler_defs.h>
  53          #include <SI_C8051F990_Register_Enums.h>                  // SFR declarations
  54          #include "InitDevice.h"
  55          #include "C8051F990_lib.h"
  56          
  57          //-----------------------------------------------------------------------------
  58          // Pin Declarations
  59          //-----------------------------------------------------------------------------
  60          
  61          SBIT (RED_LED,    SFR_P1, 5);          // '0' means ON, '1' means OFF
  62          SBIT (YELLOW_LED, SFR_P1, 3);          // '0' means ON, '1' means OFF
  63          SBIT (SW2,        SFR_P0, 2);          // SW2 == 0 means switch pressed
  64          SBIT (SW3,        SFR_P0, 3);          // SW3 == 0 means switch pressed
  65          
  66          //-----------------------------------------------------------------------------
  67          // Global Constants
  68          //-----------------------------------------------------------------------------
  69          
  70          #define LED_ON           0
  71          #define LED_OFF          1
  72          
  73          //-----------------------------------------------------------------------------
  74          // Global VARIABLES
  75          //-----------------------------------------------------------------------------
  76          LOCATED_VARIABLE_NO_INIT (reserved, U8, SEG_XDATA, 0x0000);
  77          
  78          //-----------------------------------------------------------------------------
  79          // SiLabs_Startup() Routine
  80          // ----------------------------------------------------------------------------
  81          // This function is called immediately after reset, before the initialization
  82          // code is run in SILABS_STARTUP.A51 (which runs before main() ). This is a
  83          // useful place to disable the watchdog timer, which is enable by default
  84          // and may trigger before main() in some instances.
  85          //-----------------------------------------------------------------------------
  86          void SiLabs_Startup (void)
  87          {
  88   1        // Disable the watchdog here
  89   1      }
  90           
  91          //-----------------------------------------------------------------------------
  92          // main() Routine
  93          // ----------------------------------------------------------------------------
  94          int main (void)
  95          {
  96   1      
  97   1              while(!SW2);                        // Debug Trap -- Prevents the system
  98   1                                                                                 // from entering sleep mode after
  99   1                                                                                 // a reset if Switch 2 is pressed.
 100   1      
 101   1              //Enter default mode
 102   1              enter_DefaultMode_from_RESET();
 103   1      
 104   1              RED_LED = LED_OFF;                  // Initilize the state of the signals
 105   1              YELLOW_LED = LED_OFF;
 106   1      
 107   1              LPM_Init();                         // Initialize Power Management
 108   1              LPM_Enable_Wakeup(PORT_MATCH);      // Enable Port Match wake-up source
 109   1      
 110   1              //----------------------------------
 111   1              // Main Application Loop
 112   1              //----------------------------------
 113   1              while (1)
C51 COMPILER V9.53.0.0   F99X_SLEEPMODE_PORTMATCHWAKE                                      04/24/2018 12:57:52 PAGE 3   

 114   1              {
 115   2      
 116   2                //-----------------------------------------------------------------------
 117   2                // Task #1 - Handle Port Match Event
 118   2                //-----------------------------------------------------------------------
 119   2                if(Port_Match_Wakeup)
 120   2                {
 121   3      
 122   3                       Port_Match_Wakeup = 0;        // Reset Port Match Flag to indicate
 123   3                                                                                 // that we have detected an event
 124   3      
 125   3                       // Adjust LED state for active mode
 126   3                       YELLOW_LED = LED_OFF;
 127   3                       RED_LED = LED_ON;
 128   3      
 129   3                }
 130   2      
 131   2                //-----------------------------------------------------------------------
 132   2                // Task #2 - Enter sleep mode if P0.3 switch is pressed
 133   2                //-----------------------------------------------------------------------
 134   2      
 135   2                if(!SW3)                         // If the P0.3 switch is pressed
 136   2                {
 137   3      
 138   3                       // Configure the Port I/O for Low Power Mode
 139   3                       RED_LED = LED_OFF;            // Turn off the RED_LED
 140   3      
 141   3                       YELLOW_LED = LED_ON;          // Turn on Yellow LED to indicate that
 142   3                                                                                 // the device is entering the low power
 143   3                                                                                 // state
 144   3                       LPM (SLEEP);
 145   3      
 146   3                }
 147   2              }
 148   1      
 149   1              // NOTREACHED
 150   1              return 0;
 151   1      }
*** WARNING C294 IN LINE 150 OF C:\Users\Rilind\Desktop\System_project\Exam_Project\Exam_Project_2\F99x-98x_SleepMode_Po
             -rtMatchWake\src\F99x_SleepMode_PortMatchWake.c: unreachable code


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     44    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
